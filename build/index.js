(()=>{"use strict";var e={492:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(338),c=n(419),u=n(635),p=n(644),d=n(406),l=r(n(986)),y=s(n(142)),f=n(744),v=n(860)(),g=(y.default.config(),n(582)),h=process.env.SERVER_PORT||8080;v.use(l.urlencoded({extended:!1})),v.use(l.json()),v.use(g({origin:"*",methods:["GET","POST","DELETE","UPDATE","PUT","PATCH"]})),(0,a.attachControllers)(v,[c.HealthcheckController,u.OAuthController,p.UserController,d.NotificationController,f.TemplateController]),v.listen(h,(()=>{console.log(`Service restapi is running on port ${h}.`)}))},419:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.HealthcheckController=void 0;const r=n(338),s=n(820),a=n(436),c=n(468);let u=class{constructor(){}healthcheck(e,t,n){return t.status(a.HttpStauts.SUCCESS).json(new s.HttpResponse({message:a.HttpStautsMessage.OK,status:a.HttpStauts.SUCCESS,context:"healthcheck",service:c.SERVICE_NAME,date:new Date}))}};o([(0,r.Get)("/health"),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",void 0)],u.prototype,"healthcheck",null),u=o([(0,r.Controller)("/"),i("design:paramtypes",[])],u),t.HealthcheckController=u},406:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationController=void 0;const s=n(338),a=n(604),c=n(973),u=n(436),p=n(820),d=n(468),l=n(933),y=n(57);let f=class{constructor(){}getNotifications(e,t,n){return r(this,void 0,void 0,(function*(){const o=yield this._notificationService.getNotifications({request:e,response:t,next:n});t.status(u.HttpStauts.SUCCESS).json(new p.HttpResponse({message:u.HttpStautsMessage.OK,status:u.HttpStauts.SUCCESS,context:"getNotifications",service:d.SERVICE_NAME,date:new Date,data:o}))}))}getNotification(e,t,n){return r(this,void 0,void 0,(function*(){const o=Number(e.params.id),i=yield this._notificationService.getNotificationById({request:e,response:t,next:n},o);t.status(u.HttpStauts.SUCCESS).json(new p.HttpResponse({message:u.HttpStautsMessage.OK,status:u.HttpStauts.SUCCESS,context:"getNotification",service:d.SERVICE_NAME,date:new Date,data:i}))}))}saveNotification(e,t,n){return r(this,void 0,void 0,(function*(){const o=e.body,i=yield this._notificationService.saveNotification({request:e,response:t,next:n},o);t.status(u.HttpStauts.SUCCESS).json(new p.HttpResponse({message:u.HttpStautsMessage.OK,status:u.HttpStauts.SUCCESS,context:"saveNotification",service:d.SERVICE_NAME,date:new Date,data:i}))}))}updateNotification(e,t,n){return r(this,void 0,void 0,(function*(){const o=e.body,i=yield this._notificationService.updateNotificationById({request:e,response:t,next:n},o);t.status(u.HttpStauts.SUCCESS).json(new p.HttpResponse({message:u.HttpStautsMessage.OK,status:u.HttpStauts.SUCCESS,context:"updateNotification",service:d.SERVICE_NAME,date:new Date,data:i}))}))}deleteNotification(e,t,n){return r(this,void 0,void 0,(function*(){const o=Number(e.params.id);yield this._notificationService.deleteNotificationById({request:e,response:t,next:n},o),t.status(u.HttpStauts.SUCCESS).json(new p.HttpResponse({message:u.HttpStautsMessage.OK,status:u.HttpStauts.SUCCESS,context:"deleteNotification",service:d.SERVICE_NAME,date:new Date}))}))}};o([(0,a.Inject)(c.NotificationService),i("design:type",c.NotificationService)],f.prototype,"_notificationService",void 0),o([(0,s.Get)("/notifications"),(0,l.Trycatch)({context:"Controller",useResponse:!0}),(0,y.Args)({required:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"getNotifications",null),o([(0,s.Get)("/notifications/:id"),(0,l.Trycatch)({context:"Controller",useResponse:!0}),(0,y.Args)({required:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"getNotification",null),o([(0,s.Post)("/notifications"),(0,l.Trycatch)({context:"Controller",useResponse:!0}),(0,y.Args)({required:!0,exludes:["id"]}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"saveNotification",null),o([(0,s.Put)("/notifications/:id"),(0,l.Trycatch)({context:"Controller",useResponse:!0}),(0,y.Args)({required:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"updateNotification",null),o([(0,s.Delete)("/notifications/:id"),(0,l.Trycatch)({context:"Controller",useResponse:!0}),(0,y.Args)({required:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"deleteNotification",null),f=o([(0,s.Controller)(d.API_BASE_URL),i("design:paramtypes",[])],f),t.NotificationController=f},635:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthController=void 0;const s=n(338),a=n(820),c=n(436),u=n(878),p=n(57),d=n(933),l=n(604),y=n(468),f=n(717);let v=class{constructor(){}login(e,t,n){return r(this,void 0,void 0,(function*(){const o=e.body,i=yield this._oauthService.login({request:e,response:t,next:n},o);t.status(c.HttpStauts.SUCCESS).json(new a.HttpResponse({message:c.HttpStautsMessage.OK,status:c.HttpStauts.SUCCESS,context:"login",service:y.SERVICE_NAME,date:new Date,data:i}))}))}keepalive(e,t,n){}logout(e,t,n){}register(e,t,n){return r(this,void 0,void 0,(function*(){const o=e.body,i=yield this._userService.saveUser({request:e,response:t,next:n},o);t.status(c.HttpStauts.SUCCESS).json(new a.HttpResponse({message:c.HttpStautsMessage.OK,status:c.HttpStauts.SUCCESS,context:"register",service:y.SERVICE_NAME,date:new Date,data:i}))}))}};o([(0,l.Inject)(u.OAuthService),i("design:type",u.OAuthService)],v.prototype,"_oauthService",void 0),o([(0,l.Inject)(f.UserSerivce),i("design:type",f.UserSerivce)],v.prototype,"_userService",void 0),o([(0,s.Post)("/login"),(0,d.Trycatch)({context:"Controller",useResponse:!0}),(0,p.Args)({required:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],v.prototype,"login",null),o([(0,s.Get)("/keepalive/:id"),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",void 0)],v.prototype,"keepalive",null),o([(0,s.Get)("/logout/id"),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",void 0)],v.prototype,"logout",null),o([(0,s.Post)("/register"),(0,d.Trycatch)({context:"Controller",useResponse:!0}),(0,p.Args)({required:!0,exludes:["id"]}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],v.prototype,"register",null),v=o([(0,s.Controller)(y.API_BASE_URL),i("design:paramtypes",[])],v),t.OAuthController=v},744:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateController=void 0;const s=n(338),a=n(468),c=n(57),u=n(933),p=n(604),d=n(436),l=n(820),y=n(384);let f=class{constructor(){}getTemplates(e,t,n){return r(this,void 0,void 0,(function*(){const o=yield this._templateService.getTemplates({request:e,response:t,next:n});t.status(d.HttpStauts.SUCCESS).json(new l.HttpResponse({message:d.HttpStautsMessage.OK,status:d.HttpStauts.SUCCESS,context:"getTemplates",service:a.SERVICE_NAME,date:new Date,data:o}))}))}getTemplate(e,t,n){return r(this,void 0,void 0,(function*(){const o=Number(e.params.id),i=yield this._templateService.getTemplateById({request:e,response:t,next:n},o);t.status(d.HttpStauts.SUCCESS).json(new l.HttpResponse({message:d.HttpStautsMessage.OK,status:d.HttpStauts.SUCCESS,context:"getTemplate",service:a.SERVICE_NAME,date:new Date,data:i}))}))}saveTemplate(e,t,n){return r(this,void 0,void 0,(function*(){const o=e.body,i=yield this._templateService.saveTemplate({request:e,response:t,next:n},o);t.status(d.HttpStauts.SUCCESS).json(new l.HttpResponse({message:d.HttpStautsMessage.OK,status:d.HttpStauts.SUCCESS,context:"saveTemplate",service:a.SERVICE_NAME,date:new Date,data:i}))}))}updateTemplate(e,t,n){return r(this,void 0,void 0,(function*(){const o=e.body,i=yield this._templateService.updateTemplateById({request:e,response:t,next:n},o);t.status(d.HttpStauts.SUCCESS).json(new l.HttpResponse({message:d.HttpStautsMessage.OK,status:d.HttpStauts.SUCCESS,context:"updateTemplate",service:a.SERVICE_NAME,date:new Date,data:i}))}))}deleteTemplate(e,t,n){return r(this,void 0,void 0,(function*(){const o=Number(e.params.id);yield this._templateService.deleteTemplateById({request:e,response:t,next:n},o),t.status(d.HttpStauts.SUCCESS).json(new l.HttpResponse({message:d.HttpStautsMessage.OK,status:d.HttpStauts.SUCCESS,context:"deleteTemplate",service:a.SERVICE_NAME,date:new Date,data:null}))}))}};o([(0,p.Inject)(y.TemplateService),i("design:type",y.TemplateService)],f.prototype,"_templateService",void 0),o([(0,s.Get)("/templates"),(0,u.Trycatch)({context:"Controller",useResponse:!0}),(0,c.Args)({required:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"getTemplates",null),o([(0,s.Get)("/templates/:id"),(0,u.Trycatch)({context:"Controller",useResponse:!0}),(0,c.Args)({required:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"getTemplate",null),o([(0,s.Post)("/templates"),(0,u.Trycatch)({context:"Controller",useResponse:!0}),(0,c.Args)({required:!0,exludes:["id"]}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"saveTemplate",null),o([(0,s.Put)("/templates/:id"),(0,u.Trycatch)({context:"Controller",useResponse:!0}),(0,c.Args)({required:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"updateTemplate",null),o([(0,s.Delete)("/templates/:id"),(0,u.Trycatch)({context:"Controller",useResponse:!0}),(0,c.Args)({required:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"deleteTemplate",null),f=o([(0,s.Controller)(a.API_BASE_URL),i("design:paramtypes",[])],f),t.TemplateController=f},644:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UserController=void 0;const s=n(338),a=n(717),c=n(820),u=n(436),p=n(604),d=n(933),l=n(57),y=n(468);let f=class{constructor(){}getUsers(e,t,n){return r(this,void 0,void 0,(function*(){yield this._userService.getUsers({request:e,response:t,next:n}),t.status(u.HttpStauts.SUCCESS).json(new c.HttpResponse({message:u.HttpStautsMessage.OK,status:u.HttpStauts.SUCCESS,context:"getUsers",service:y.SERVICE_NAME,date:new Date,data:[{id:1,name:"Daniele",email:"daniele.baggio@bitsrl.net",password:"test123",course:"devops"},{id:2,name:"Davide",email:"davide.rossi@bitsrl.net",password:"test123",course:"devops"},{id:3,name:"Marco",email:"marco.verdi@bitsrl.net",password:"test123",course:"devops"}]}))}))}getFiltredUser(e,t,n){return r(this,void 0,void 0,(function*(){const o=String(e.params.term),i=yield this._userService.getUserbyTerm({request:e,response:t,next:n},o);t.status(u.HttpStauts.SUCCESS).json(new c.HttpResponse({message:u.HttpStautsMessage.OK,status:u.HttpStauts.SUCCESS,context:"getUser",service:y.SERVICE_NAME,date:new Date,data:i}))}))}getUser(e,t,n){return r(this,void 0,void 0,(function*(){const o=Number(e.params.id),i=yield this._userService.getUsersById({request:e,response:t,next:n},o);t.status(u.HttpStauts.SUCCESS).json(new c.HttpResponse({message:u.HttpStautsMessage.OK,status:u.HttpStauts.BAD_ARGS,context:"getUser",service:y.SERVICE_NAME,date:new Date,data:i}))}))}saveUser(e,t,n){return r(this,void 0,void 0,(function*(){const o=e.body,i=yield this._userService.saveUser({request:e,response:t,next:n},o);t.status(u.HttpStauts.SUCCESS).json(new c.HttpResponse({message:u.HttpStautsMessage.OK,status:u.HttpStauts.SUCCESS,context:"saveUser",service:y.SERVICE_NAME,date:new Date,data:i}))}))}updateUser(e,t,n){return r(this,void 0,void 0,(function*(){const o=Number(e.params.id),i=e.body,r=yield this._userService.updateUsersById({request:e,response:t,next:n},o,i);t.status(u.HttpStauts.SUCCESS).json(new c.HttpResponse({message:u.HttpStautsMessage.OK,status:u.HttpStauts.SUCCESS,context:"updateUser",service:y.SERVICE_NAME,date:new Date,data:r}))}))}deleteUser(e,t,n){return r(this,void 0,void 0,(function*(){const o=Number(e.params.id);yield this._userService.getUsersById({request:e,response:t,next:n},o),t.status(u.HttpStauts.SUCCESS).json(new c.HttpResponse({message:u.HttpStautsMessage.OK,status:u.HttpStauts.SUCCESS,context:"deleteUser",service:y.SERVICE_NAME,date:new Date}))}))}};o([(0,p.Inject)(a.UserSerivce),i("design:type",a.UserSerivce)],f.prototype,"_userService",void 0),o([(0,s.Get)("/users"),(0,d.Trycatch)({context:"Controller",useResponse:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"getUsers",null),o([(0,s.Get)("/users/filter/:term"),(0,d.Trycatch)({context:"Controller",useResponse:!0}),(0,l.Args)({required:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"getFiltredUser",null),o([(0,s.Get)("/users/:id"),(0,d.Trycatch)({context:"Controller",useResponse:!0}),(0,l.Args)({required:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"getUser",null),o([(0,s.Post)("/users"),(0,d.Trycatch)({context:"Controller",useResponse:!0}),(0,l.Args)({required:!0,exludes:["id"]}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"saveUser",null),o([(0,s.Put)("/users/:id"),(0,d.Trycatch)({context:"Controller",useResponse:!0}),(0,l.Args)({required:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"updateUser",null),o([(0,s.Delete)("/users/:id"),(0,d.Trycatch)({context:"Controller",useResponse:!0}),(0,l.Args)({required:!0}),i("design:type",Function),i("design:paramtypes",[Object,Object,Function]),i("design:returntype",Promise)],f.prototype,"deleteUser",null),f=o([(0,s.Controller)(y.API_BASE_URL),i("design:paramtypes",[])],f),t.UserController=f},57:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Args=void 0;const o=n(820),i=n(436);t.Args=e=>(t,n,r)=>{const s=r.value;return r.value=function(...t){const r=t[0],a=t[1],c=Object.assign(Object.assign({},r.params),r.body);return Object.keys(Object.assign({},c)).filter((t=>{var n;return!(null===(n=null==e?void 0:e.exludes)||void 0===n?void 0:n.includes(t))})).map((e=>!!c[e])).filter((e=>!e)).length>0&&(null==e?void 0:e.required)&&a.status(i.HttpStauts.BAD_ARGS).json(new o.HttpResponse({status:i.HttpStauts.BAD_ARGS,message:"Invalid Argument Exception",context:n,service:"restapi",date:new Date})),s.apply(this,t)},r}},933:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Trycatch=void 0;const i=n(820),r=n(436);t.Trycatch=e=>(t,n,s)=>{const a=s.value;return s.value=function(...t){var s,c;return o(this,void 0,void 0,(function*(){const o=(null===(s=t[0])||void 0===s?void 0:s.response)?null===(c=t[0])||void 0===c?void 0:c.response:t[1];try{return yield a.apply(this,t)}catch(t){if(!(null==e?void 0:e.useResponse))throw new Error(null==t?void 0:t.message);console.error(t),o.status(r.HttpStauts.INTERNAL_ERR).json(new i.HttpResponse({message:(null==e?void 0:e.message)||(null==t?void 0:t.message),status:r.HttpStauts.INTERNAL_ERR,service:"restapi",context:(null==e?void 0:e.context)||n,date:new Date}))}}))},s}},604:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Inject=void 0;const o=n(760);t.Inject=e=>function(t,n){let i;Object.defineProperty(t,n,{get:function(){return o.Container.get(e)},set:function(t){return i=t,o.Container.get(e)}})}},688:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationEntity=void 0;const r=n(250);let s=class{};o([(0,r.Column)("id"),(0,r.PrimaryGeneratedColumn)("increment"),i("design:type",Number)],s.prototype,"id",void 0),o([(0,r.Column)({name:"content",type:"varchar",nullable:!1}),i("design:type",String)],s.prototype,"content",void 0),o([(0,r.Column)({name:"sender",type:"varchar",nullable:!1}),i("design:type",String)],s.prototype,"sender",void 0),o([(0,r.Column)({name:"receivers",type:"varchar",nullable:!1}),i("design:type",String)],s.prototype,"receivers",void 0),o([(0,r.Column)({name:"date",type:"varchar",nullable:!1}),i("design:type",Date)],s.prototype,"date",void 0),o([(0,r.Column)({name:"template_id",type:"integer",nullable:!1}),i("design:type",Number)],s.prototype,"templateId",void 0),s=o([(0,r.Entity)("message_outbox")],s),t.NotificationEntity=s},278:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateEntity=void 0;const r=n(250);n(951);let s=class{};o([(0,r.Column)("id"),(0,r.PrimaryGeneratedColumn)("increment"),i("design:type",Number)],s.prototype,"id",void 0),o([(0,r.Column)({name:"name",type:"varchar",nullable:!1}),i("design:type",String)],s.prototype,"name",void 0),o([(0,r.Column)({name:"description",type:"varchar",nullable:!1}),i("design:type",String)],s.prototype,"description",void 0),o([(0,r.Column)({name:"template",type:"varchar",nullable:!1}),i("design:type",String)],s.prototype,"template",void 0),o([(0,r.Column)({name:"type",type:"varchar",nullable:!1}),i("design:type",String)],s.prototype,"type",void 0),s=o([(0,r.Entity)("message_template")],s),t.TemplateEntity=s},52:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.UserEntity=void 0;const r=n(250);let s=class{};o([(0,r.Column)("id"),(0,r.PrimaryColumn)(),(0,r.Generated)("increment"),i("design:type",Number)],s.prototype,"id",void 0),o([(0,r.Column)({name:"name",type:"varchar",nullable:!1}),i("design:type",String)],s.prototype,"name",void 0),o([(0,r.Column)({name:"email",type:"varchar",nullable:!1}),i("design:type",String)],s.prototype,"email",void 0),o([(0,r.Column)({name:"password",type:"varchar",nullable:!1}),i("design:type",String)],s.prototype,"password",void 0),o([(0,r.Column)({name:"course",type:"varchar",nullable:!1}),i("design:type",String)],s.prototype,"course",void 0),s=o([(0,r.Entity)("users")],s),t.UserEntity=s},913:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Mapper=void 0,t.Mapper=class{toObject(e){let t={};return Object.keys(e).map((n=>{this._instanceOf(e,n)&&(t[n]=e[n])})),t}toArray(e){let t=[];return e.forEach((e=>{let n={};Object.keys(e).map((t=>{this._instanceOf(e,t)&&(n[t]=e[t])})),t.push(n)})),t}_instanceOf(e,t){return t in e}}},436:(e,t)=>{var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.HttpStautsMessage=t.HttpStauts=void 0,(o=t.HttpStauts||(t.HttpStauts={}))[o.BAD_ARGS=400]="BAD_ARGS",o[o.UNAUTHORIZED=401]="UNAUTHORIZED",o[o.FORBIDDEN=403]="FORBIDDEN",o[o.NOT_FOUND=404]="NOT_FOUND",o[o.INTERNAL_ERR=500]="INTERNAL_ERR",o[o.SUCCESS=200]="SUCCESS",(n=t.HttpStautsMessage||(t.HttpStautsMessage={})).OK="OK",n.KO="KO"},314:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Notification=void 0,t.Notification=class{}},820:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HttpResponse=void 0,t.HttpResponse=class{constructor(e){this.status=e.status,this.message=e.message,this.context=e.context,this.date=e.date||new Date,this.data=e.data}}},951:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Template=t.TemplateType=void 0,(n=t.TemplateType||(t.TemplateType={})).EMAIL="Email",n.TEAMS="Teams",t.Template=class{}},805:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0,t.User=class{}},431:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseRepository=void 0;const s=n(760),a=n(604),c=n(981);let u=class{Repository(e){return r(this,void 0,void 0,(function*(){return(yield this._dbContext.Context()).getRepository(e)}))}};o([(0,a.Inject)(c.DatabaseContextService),i("design:type",c.DatabaseContextService)],u.prototype,"_dbContext",void 0),u=o([(0,s.Injectable)()],u),t.DatabaseRepository=u},981:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseContextService=void 0;const s=n(760),a=n(250),c=n(933),u=n(688),p=n(278),d=n(52);let l=class{Context(){return r(this,void 0,void 0,(function*(){const e=(0,a.getConnectionManager)();return e.has("default")?yield e.get():yield this.Connection()}))}Connection(){return r(this,void 0,void 0,(function*(){return yield(0,a.createConnection)({type:"postgres",host:process.env.DATABASE_HOST,port:process.env.DATABASE_PORT||5432,username:process.env.DATABASE_USER,password:process.env.DATABASE_PASSWORD,database:process.env.DATABASE_USE,entities:[d.UserEntity,u.NotificationEntity,p.TemplateEntity],synchronize:!1,logging:!0})}))}};o([(0,c.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",Promise)],l.prototype,"Context",null),l=o([(0,s.Injectable)()],l),t.DatabaseContextService=l},973:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationService=void 0;const s=n(760),a=n(933),c=n(604),u=n(688),p=n(913),d=n(431),l=n(314);let y=class{getNotifications(e){return r(this,void 0,void 0,(function*(){const e=yield(yield this._database.Repository(u.NotificationEntity)).find();return(new p.Mapper).toArray(e)}))}getNotificationById(e,t){return r(this,void 0,void 0,(function*(){const e=yield(yield this._database.Repository(u.NotificationEntity)).findOne(t);return(new p.Mapper).toObject(e)}))}saveNotification(e,t){return r(this,void 0,void 0,(function*(){const e=(new p.Mapper).toObject(t),n=yield this._database.Repository(u.NotificationEntity);return yield n.save(e)}))}updateNotificationById(e,t){return r(this,void 0,void 0,(function*(){const e=(new p.Mapper).toObject(t),n=yield this._database.Repository(u.NotificationEntity);return yield n.update(t.id,e)}))}deleteNotificationById(e,t){return r(this,void 0,void 0,(function*(){return yield(yield this._database.Repository(u.NotificationEntity)).delete(t)}))}};o([(0,c.Inject)(d.DatabaseRepository),i("design:type",d.DatabaseRepository)],y.prototype,"_database",void 0),o([(0,a.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],y.prototype,"getNotifications",null),o([(0,a.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,Number]),i("design:returntype",Promise)],y.prototype,"getNotificationById",null),o([(0,a.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,l.Notification]),i("design:returntype",Promise)],y.prototype,"saveNotification",null),o([(0,a.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,l.Notification]),i("design:returntype",Promise)],y.prototype,"updateNotificationById",null),o([(0,a.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,Number]),i("design:returntype",Promise)],y.prototype,"deleteNotificationById",null),y=o([(0,s.Injectable)()],y),t.NotificationService=y},878:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthService=void 0;const s=n(760),a=n(604),c=n(717),u=n(933);let p=class{login(e,t){return r(this,void 0,void 0,(function*(){const{email:n,password:o}=t;if(!(yield yield this._userService.getUsersByEmail(e,n)))throw new Error(`User with email: ${n} does not exist, please signup and retry!`);return{}}))}logout(){return r(this,void 0,void 0,(function*(){return console.log("Logout"),yield"LOGOUT"}))}};o([(0,a.Inject)(c.UserSerivce),i("design:type",c.UserSerivce)],p.prototype,"_userService",void 0),o([(0,u.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",Promise)],p.prototype,"login",null),p=o([(0,s.Injectable)()],p),t.OAuthService=p},384:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateService=void 0;const s=n(760),a=n(933),c=n(604),u=n(913),p=n(431),d=n(278),l=n(951);let y=class{getTemplates(e){return r(this,void 0,void 0,(function*(){const e=yield(yield this._database.Repository(d.TemplateEntity)).find();return(new u.Mapper).toArray(e)}))}getTemplateById(e,t){return r(this,void 0,void 0,(function*(){const e=yield(yield this._database.Repository(d.TemplateEntity)).findOne(t);return(new u.Mapper).toObject(e)}))}saveTemplate(e,t){return r(this,void 0,void 0,(function*(){const e=(new u.Mapper).toObject(t),n=yield this._database.Repository(d.TemplateEntity);return yield n.save(e)}))}updateTemplateById(e,t){return r(this,void 0,void 0,(function*(){const e=(new u.Mapper).toObject(t),n=yield this._database.Repository(d.TemplateEntity);return yield n.update(t.id,e)}))}deleteTemplateById(e,t){return r(this,void 0,void 0,(function*(){return yield(yield this._database.Repository(l.Template)).delete(t)}))}};o([(0,c.Inject)(p.DatabaseRepository),i("design:type",p.DatabaseRepository)],y.prototype,"_database",void 0),o([(0,a.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],y.prototype,"getTemplates",null),o([(0,a.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,Number]),i("design:returntype",Promise)],y.prototype,"getTemplateById",null),o([(0,a.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,l.Template]),i("design:returntype",Promise)],y.prototype,"saveTemplate",null),o([(0,a.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,l.Template]),i("design:returntype",Promise)],y.prototype,"updateTemplateById",null),o([(0,a.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,Number]),i("design:returntype",Promise)],y.prototype,"deleteTemplateById",null),y=o([(0,s.Injectable)()],y),t.TemplateService=y},717:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UserSerivce=void 0;const s=n(760),a=n(250),c=n(933),u=n(604),p=n(52),d=n(913),l=n(805),y=n(431);let f=class{getUsers(e){return r(this,void 0,void 0,(function*(){const e=yield(yield this._database.Repository(p.UserEntity)).find();return(new d.Mapper).toArray(e)}))}getUserbyTerm(e,t){return r(this,void 0,void 0,(function*(){const e=yield(yield this._database.Repository(p.UserEntity)).find({where:[{email:(0,a.Like)(`%${t}%`)}]});return(new d.Mapper).toArray(e)}))}getUsersById(e,t){return r(this,void 0,void 0,(function*(){const e=yield(yield this._database.Repository(p.UserEntity)).findOne(t);return(new d.Mapper).toObject(e)}))}getUsersByEmail(e,t){return r(this,void 0,void 0,(function*(){const e=yield(yield this._database.Repository(p.UserEntity)).findOne({email:t});return(new d.Mapper).toObject(e)}))}saveUser(e,t){return r(this,void 0,void 0,(function*(){const e=(new d.Mapper).toObject(t),n=yield this._database.Repository(p.UserEntity);return yield n.save(e)}))}updateUsersById(e,t,n){return r(this,void 0,void 0,(function*(){const e=(new d.Mapper).toObject(n),o=yield this._database.Repository(p.UserEntity);return yield o.update(t,e)}))}deleteUsersById(e,t){return r(this,void 0,void 0,(function*(){return yield(yield this._database.Repository(p.UserEntity)).delete(t)}))}};o([(0,u.Inject)(y.DatabaseRepository),i("design:type",y.DatabaseRepository)],f.prototype,"_database",void 0),o([(0,c.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Promise)],f.prototype,"getUsers",null),o([(0,c.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,String]),i("design:returntype",Promise)],f.prototype,"getUserbyTerm",null),o([(0,c.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,Number]),i("design:returntype",Promise)],f.prototype,"getUsersById",null),o([(0,c.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,String]),i("design:returntype",Promise)],f.prototype,"getUsersByEmail",null),o([(0,c.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,l.User]),i("design:returntype",Promise)],f.prototype,"saveUser",null),o([(0,c.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,Number,l.User]),i("design:returntype",Promise)],f.prototype,"updateUsersById",null),o([(0,c.Trycatch)({context:"Service"}),i("design:type",Function),i("design:paramtypes",[Object,Number]),i("design:returntype",Promise)],f.prototype,"deleteUsersById",null),f=o([(0,s.Injectable)()],f),t.UserSerivce=f},468:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.API_BASE_URL=t.SERVICE_NAME=void 0,t.SERVICE_NAME="restapi",t.API_BASE_URL="/api/v1"},760:e=>{e.exports=require("@decorators/di")},338:e=>{e.exports=require("@decorators/express")},986:e=>{e.exports=require("body-parser")},582:e=>{e.exports=require("cors")},142:e=>{e.exports=require("dotenv")},860:e=>{e.exports=require("express")},250:e=>{e.exports=require("typeorm")}},t={};!function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}(492)})();